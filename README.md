# üé¨ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–π –æ—Ç–∑—ã–≤–æ–≤  IMDB —Å MLflow üöÄ

–≠—Ç–æ –¥–µ–º–æ—Å—Ç—Ä–∞—Ü–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ø–∞–π–ø–ª–∞–π–Ω–∞ ML-–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –≤ ML Flow ‚ú® ML Flow –∑–¥–µ—Å—å –ø—Ä–æ—Å—Ç–æ —Ö—Ä–∞–Ω–∏—Ç –ª–æ–≥–∏ –æ–±—É—á–µ–Ω–∏—è –∏ —Å–∞–º–∏ –º–æ–¥–µ–ª–∏. 

## üß© –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

- `data/` - –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏ IMDB üìä
- `models/` - ML –º–æ–¥–µ–ª–∏ ‚ú®
- `mlflow_server/` - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ üìà
- `app/` - API –¥–ª—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –º–æ–¥–µ–ª–∏ üîå
- `tests/` - –¢–µ—Å—Ç—ã API –∏ –º–æ–¥–µ–ª–∏ üß™
- `Dockerfile` –∏ `docker-compose.yml` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ üê≥

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Å Docker

–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å—ë - —Å –ø–æ–º–æ—â—å—é Docker Compose:

```bash
# –ó–∞–ø—É—Å–∫ 
docker-compose up -d
```

–≠—Ç–æ –≤—ã–ø–æ–ª–Ω–∏—Ç:
1. üì¶ –°–±–æ—Ä–∫—É Docker –æ–±—Ä–∞–∑–∞
2. üìä –ó–∞–≥—Ä—É–∑–∫—É –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É –Ω–∞–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö IMDB
3. üß† –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ –∞–Ω–∞–ª–∏–∑–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–π
4. üìà –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è MLflow
5. üöÄ –ó–∞–ø—É—Å–∫ API –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π

## üîÆ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –≤—ã –º–æ–∂–µ—Ç–µ –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ API –ø–æ –∞–¥—Ä–µ—Å—É http://localhost:5000:

### –û–¥–∏–Ω–æ—á–Ω–æ–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ

```bash
curl -X POST http://localhost:5000/predict \
  -H "Content-Type: application/json" \
  -d '{"text": "–≠—Ç–æ—Ç —Ñ–∏–ª—å–º –±—ã–ª –∞–±—Å–æ–ª—é—Ç–Ω–æ —Ñ–∞–Ω—Ç–∞—Å—Ç–∏—á–µ—Å–∫–∏–º!"}'
```

### –ü–∞–∫–µ—Ç–Ω—ã–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è

```bash
curl -X POST http://localhost:5000/predict \
  -H "Content-Type: application/json" \
  -d '{"text": ["–≠—Ç–æ—Ç —Ñ–∏–ª—å–º –±—ã–ª –∞–±—Å–æ–ª—é—Ç–Ω–æ —Ñ–∞–Ω—Ç–∞—Å—Ç–∏—á–µ—Å–∫–∏–º!", "–•—É–¥—à–∏–π —Ñ–∏–ª—å–º, –∫–æ—Ç–æ—Ä—ã–π —è –∫–æ–≥–¥–∞-–ª–∏–±–æ –≤–∏–¥–µ–ª."]}'
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞

–ï—Å—Ç—å —É–¥–æ–±–Ω—ã–π –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç:

```bash
# –û–¥–∏–Ω–æ—á–Ω—ã–π —Ç–µ–∫—Å—Ç
python app/query_api.py --text "–≠—Ç–æ—Ç —Ñ–∏–ª—å–º –±—ã–ª –∞–±—Å–æ–ª—é—Ç–Ω–æ —Ñ–∞–Ω—Ç–∞—Å—Ç–∏—á–µ—Å–∫–∏–º!"

# –ò–∑ —Ñ–∞–π–ª–∞ (–æ–¥–∏–Ω –æ—Ç–∑—ã–≤ –Ω–∞ —Å—Ç—Ä–æ–∫—É)
python app/query_api.py --file my_reviews.txt --batch
```

## üìà –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ MLflow

–î–æ—Å—Ç—É–ø –∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É MLflow –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤:

```
http://localhost:5001
```

## üîß –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (–±–µ–∑ Docker)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
python data/prepare_data.py

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ MLflow (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
python mlflow_server/run_server.py

# –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏
python models/train.py

# –ó–∞–ø—É—Å–∫ API
python app/api.py
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –° –∑–∞–ø—É—â–µ–Ω–Ω—ã–º Docker
pytest tests/

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é
python -m pytest tests/
```